(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-978157e6"],{"5e81":function(e,n,t){e.exports=t.p+"img/login-element-1.7d658dd7.png"},6401:function(e,n,t){},"740b":function(e,n,t){e.exports=t.p+"img/login-element-3.cbc75b02.png"},a1ed:function(e,n,t){"use strict";t("6401")},dc3f:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"login"},[t("div",{staticClass:"login-form-wrap"},[e._m(0),t("div",{staticClass:"login-form"},[t("div",{staticClass:"f-in",class:{running:e.runningLogin}},[t("transition",{attrs:{appear:"",name:"title"}},[t("div",{staticClass:"login-title"},[e._v(" 登录 "),t("div",{staticClass:"line"})])]),t("transition",{attrs:{appear:"",name:"login"}},[t("div",{staticClass:"btn-wrap",staticStyle:{position:"relative"}},[t("div",{staticClass:"login-input-wrap",class:{focus:e.focus1,running:e.runningLogin},staticStyle:{"margin-bottom":"34px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"login-input",attrs:{spellcheck:"false",disabled:e.runningLogin,placeholder:"用户名",type:"text",tabindex:"1",autocomplete:"off"},domProps:{value:e.username},on:{focus:function(n){e.focus1=!0},blur:function(n){e.focus1=!1},input:function(n){n.target.composing||(e.username=n.target.value)}}}),t("span",{staticClass:"login-icon el-icon-user"}),t("input",{staticStyle:{position:"fixed",top:"-100000px"},attrs:{spellcheck:"false",type:"text",tabindex:"3",autocomplete:"off"}})]),t("div",{staticClass:"login-input-wrap",class:{focus:e.focus2,running:e.runningLogin},staticStyle:{"margin-bottom":"48px"}},[t("input",{staticStyle:{position:"fixed",top:"-100000px"},attrs:{spellcheck:"false",type:"password",tabindex:"4",autocomplete:"off"}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"login-input",attrs:{spellcheck:"false",tabindex:"2",disabled:e.runningLogin,placeholder:"密码",type:"password",autocomplete:"off"},domProps:{value:e.password},on:{focus:function(n){e.focus2=!0},blur:function(n){e.focus2=!1},input:function(n){n.target.composing||(e.password=n.target.value)}}}),t("span",{staticClass:"login-icon el-icon-unlock"})]),t("div",{staticClass:"login-submit-wrap"},[t("div",{staticClass:"login-submit",class:{run:e.runningLogin},on:{click:e.toLogin}},[t("span",{directives:[{name:"show",rawName:"v-show",value:!e.runningLogin,expression:"!runningLogin"}]},[e._v("登录")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.runningLogin,expression:"!runningLogin"}],staticClass:"login-remember",class:{checked:e.isRemember,"no-runing-login":!e.runningLogin},on:{click:function(n){return n.preventDefault(),e.changeRemember.apply(null,arguments)}}},[t("div",{staticClass:"login-remember-check"},[t("i",{staticClass:"el-icon-check",style:{opacity:e.isRemember?1:0}})]),t("span",{staticClass:"remember-text"},[e._v("记住我")])])])])])],1)]),e._m(1),t("div",{staticClass:"center-bg"})]),t("div",{staticClass:"loading-effect"})])},s=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"logo-name"},[t("span",{staticClass:"login-logo"},[e._v("环境综合监测管控平台")])])},function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"left-img-wrap"},[i("img",{staticClass:"el-1",attrs:{src:t("5e81"),alt:"/"}}),i("img",{staticClass:"el-4",attrs:{src:t("740b"),alt:"/"}})])}],a=t("dc45"),o=(t("e186"),t("0a6b")),r={name:"login",data:function(){return{isRemember:!1,runningLogin:!1,username:"",password:"",focus1:!1,focus2:!1}},mounted:function(){var e=this;this.$nextTick((function(){setTimeout((function(){e.$store.commit("flashAnimatePage",!1)}),1e3),document.removeEventListener("keydown",e.fn),document.addEventListener("keydown",e.fn,!1);var n=e.getCookie("ccc_remember"),t=e.getCookie("ccc_username"),i=e.getCookie("ccc_password");e.isRemember=1==n,t&&i&&(e.username=t,e.password=i)}))},methods:{changeRemember:function(){this.runningLogin||(this.isRemember=!this.isRemember)},toLogin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.runningLogin){n.next=2;break}return n.abrupt("return");case 2:if(!e.isDataEmpty(e.username)){n.next=4;break}return n.abrupt("return",e.$warning("请输入用户名"));case 4:if(!e.isDataEmpty(e.password)){n.next=6;break}return n.abrupt("return",e.$warning("请输入密码"));case 6:e.runningLogin=!0,e.showLoading(".btn-wrap","登录中"),e.$http.post(o["b"]+"?account="+e.username+"&password="+e.password).then((function(n){if(200==n.data.respCode)try{var t=n.data.data.token,i=720;e.addCookie("ccc_token",t,i),e.isRemember?(e.addCookie("ccc_remember",1,i),e.addCookie("ccc_username",e.username,i),e.addCookie("ccc_password",e.password,i)):(e.delCookie("ccc_remember"),e.delCookie("ccc_username"),e.delCookie("ccc_password")),setTimeout((function(){e.runningLogin=!1,e.$router.push("/"),e.hideLoading()}),1e3)}catch(s){e.runningLogin=!1,e.hideLoading(),e.$error("用户名或密码错误")}else e.runningLogin=!1})).catch((function(n){console.error(n),e.hideLoading(),e.runningLogin=!1}));case 9:case"end":return n.stop()}}),n)})))()},fn:function(e){13==e.keyCode&&this.toLogin()}},destroyed:function(){document.removeEventListener("keydown",this.fn)}},c=r,u=(t("a1ed"),t("cba8")),l=Object(u["a"])(c,i,s,!1,null,"172ba7cd",null);n["default"]=l.exports}}]);