webpackJsonp([1],{0:function(t,e){},"6VpE":function(t,e){},"7UNn":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tree",staticClass:"tree-wrap"},[a("div",{staticClass:"tree"},[a("ul",{staticClass:"table-header"},t._l(t.column,function(e,s){return a("li",{key:s,staticClass:"nowrap",style:[{width:e.width?e.width+"px":1==e.delete||1==e.operate?"50px":"",flex:e.width?"none":1==e.delete||1==e.operate?"none":1,padding:1==e.operate||1==e.delete?"0px":"0px 10px","min-width":1==e.operate||1==e.delete?"40px":"100px"}]},[1==e.operate?[a("i",{staticClass:"fa fa-cogs",staticStyle:{transform:"translateX(-12px)"},attrs:{"aria-hidden":"true"}})]:1==e.delete?a("span",[a("button",{staticClass:"btn-delete",attrs:{title:"删除所选项",disabled:t.deleteBtnDisable},on:{click:t.removeLine}},[t.deleteBtnDisable?a("i",{staticClass:"fa fa-spin fa-spinner",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.deleteBtnDisable?t._e():a("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])]):a("span",[e.isTree?a("span",[a("button",{staticClass:"btn-refresh",attrs:{title:"刷新",disabled:t.refreshBtnDisable},on:{click:t.refreshTable}},[a("i",{staticClass:"fa fa-refresh",class:{"fa-spin":!!t.refreshBtnDisable},attrs:{"aria-hidden":"true"}})]),t._v("\r\n                     \r\n                ")]):t._e(),t._v("\r\n                "+t._s(e.name)+"\r\n            ")]),t._v(" "),a("span",{staticClass:"w-resize",on:{mousedown:function(a){t.willDragStart(e,a)}}})],2)})),t._v(" "),a("ul",{staticClass:"table-body"},t._l(t.data,function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"rowItem.show"}],key:e.id,staticClass:"table-body-li-wrap",on:{mouseleave:function(a){t.rowMouseLeave(e.id)},mouseenter:function(a){t.rowMouseEnter(e.id)}}},[1==t.uploading["uploading"+e.id]?a("div",{staticClass:"uploading"},[a("i",{staticClass:"fa fa-spin fa-spinner",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),a("div",{staticStyle:{display:"flex"}},t._l(t.column,function(s,n){return a("li",{key:n,staticClass:"table-body-li nowrap",class:{modify:1==e.modify},style:[{width:s.width?s.width+"px":1==s.delete||1==s.operate?"50px":"",flex:s.width?"none":1==s.delete||1==s.operate?"none":1,padding:1==s.operate?"0px":"0px 10px","padding-left":s.isTree?24*e.level+14+"px":1==s.operate?"0px":"14px",overflow:1==s.operate?"visible":"","min-width":1==s.operate||1==s.delete?"40px":"100px"}]},[s.isTree&&0!=e.children.length?[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.icon,expression:"rowItem.icon == false"}],on:{click:function(a){t.expand(e,!0)}}},[a("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.icon,expression:"rowItem.icon == true"}],on:{click:function(a){t.expand(e,!1)}}},[a("i",{staticClass:"fa fa-minus-square",attrs:{"aria-hidden":"true"}})])]:t._e(),t._v(" "),s.edit||s.isTree||s.operate||s.delete||"id"==s.prop?t._e():a("span",[t._v(" "+t._s(e[s.prop])+" ")]),t._v(" "),s.edit||s.isTree||s.operate||s.delete||"id"!=s.prop?t._e():a("span",[t._v(" "+t._s(t._f("timestamp__")(e[s.prop]))+" ")]),t._v(" "),s.edit?[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.operateStatus["status"+e.id],expression:"!operateStatus['status'+rowItem.id]"}],staticClass:"no-wrap",staticStyle:{"text-align":"left"},attrs:{title:e[s.prop]}},[t._v("\r\n                            "+t._s(e[s.prop])+"\r\n                        ")]),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:t.operateStatus["status"+e.id],expression:"operateStatus['status'+rowItem.id]"}],style:{width:s.isTree?"auto":"100%"},attrs:{type:"text"},domProps:{value:t.lineValue["lineValue"+s.prop+e.id]},on:{input:function(a){t.inputEdit(e.id,s.prop,a)}}})]:t._e(),t._v(" "),s.operate?[a("span",{staticClass:"hover-btn",on:{mouseover:function(a){t.mouseHover(e.id,1)},mouseout:function(a){t.mouseHover(e.id,2)}}},[t._m(0,!0),t._v(" "),a("transition",{attrs:{name:"as"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.hoverBtn["hoverBtn"+e.id],expression:"hoverBtn['hoverBtn'+rowItem.id]"}],staticClass:"col-btn-group"},[a("span",{directives:[{name:"show",rawName:"v-show",value:!t.operateStatus["status"+e.id],expression:"!operateStatus['status'+rowItem.id]"}]},[a("button",{staticClass:"btn-edit",on:{click:function(a){t.operateBtn(e.id)}}},[a("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" 编辑\r\n                                        ")]),t._v(" "),a("button",{staticClass:"btn-add",on:{click:function(a){t.addLine(e.id,1)}}},[a("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 增加同级\r\n                                        ")]),t._v(" "),a("button",{staticClass:"btn-add",on:{click:function(a){t.addLine(e.id,2)}}},[a("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}}),t._v(" 增加下级\r\n                                        ")]),t._v(" "),e.modify?a("button",{staticClass:"btn-upload",on:{click:function(a){t.upload(e.id)}}},[a("i",{staticClass:"fa fa-cloud-upload",attrs:{"aria-hidden":"true"}}),t._v(" 上传\r\n                                        ")]):t._e()]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.operateStatus["status"+e.id],expression:"!!operateStatus['status'+rowItem.id]"}]},[a("button",{staticClass:"btn-confirm",on:{click:function(a){t.saveBtn(e.id)}}},[a("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" 确认\r\n                                        ")]),t._v(" "),a("button",{staticClass:"btn-cancel",on:{click:function(a){t.cancel(e.id)}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),t._v(" 撤销\r\n                                        ")])])])])],1)]:t._e(),t._v(" "),s.delete?[a("span",{staticClass:"checkbox-span",class:{active:t.checkboxControl["active"+e.id]},on:{click:function(a){t.checkbox_change(e.id)}}},[t.checkboxControl["active"+e.id]?a("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.checkboxControl["active"+e.id]?t._e():a("i",{staticClass:"fa fa-circle-o",attrs:{"aria-hidden":"true"}})])]:t._e(),t._v(" "),e.modify&&0==n?[t._m(1,!0)]:t._e()],2)}))])})),t._v(" "),0==t.data.length?a("div",{staticClass:"no-data"},[a("i",{staticClass:"fa fa-file-o",attrs:{"aria-hidden":"true"}}),t._v("  数据为空\r\n    ")]):t._e()]),t._v(" "),t.treeLoading&&0!=t.data.length?a("div",{staticClass:"tree-loading"},[a("i",{staticClass:"fa fa-spinner fa-spin",attrs:{"aria-hidden":"true"}})]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"hover-btn-span"},[t._v("\r\n                                 "),a("i",{staticClass:"fa fa-pencil-square",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"modify-pin"},[a("span",{staticClass:"modify-pin-title"},[t._v("记得上传")]),t._v(" "),a("i",{staticClass:"fa fa-exclamation",attrs:{"aria-hidden":"true"}})])}],i={render:s,staticRenderFns:n};e.a=i},"84Yf":function(t,e){},"9Smb":function(t,e){},EXDq:function(t,e,a){"use strict";var s=a("fDRT"),n=a("Up5l"),i=a("mPyB"),r=i(s.a,n.a,!1,null,null,null);e.a=r.exports},LV8r:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("test")],1)},n=[],i={render:s,staticRenderFns:n};e.a=i},M93x:function(t,e,a){"use strict";function s(t){a("84Yf")}var n=a("dYPY"),i=a("LV8r"),r=a("mPyB"),o=s,d=r(n.a,i.a,!1,o,null,null);e.a=d.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("f0wq"),n=a("M93x"),i=a("/oTv"),r=a("6VpE"),o=(a.n(r),a("iOHE"));a.n(o);s.a.use(i.a),s.a.config.productionTip=!1,new s.a({el:"#app",template:"<App/>",components:{App:n.a}})},Sz5k:function(t,e,a){"use strict";function s(t){a("YooD")}var n=a("kq5j"),i=a("7UNn"),r=a("mPyB"),o=s,d=r(n.a,i.a,!1,o,"data-v-250d2370",null);e.a=d.exports},Up5l:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{on:{click:function(e){t.toto=!t.toto}}},[t._v(" 切换到"+t._s(t.toto?"甘特图":"tree-grid"))]),t._v(" "),t.toto?a("div",[a("tree-grid",{attrs:{columns:t.columns,rowdata:t.data,needUpdate:t.needUpdate,leafUrl:"http://api.fanhua.dev.tianheng-uestc.com/api/v1/apitest//component/treegrid/base?parentid=",treeLoading:t.treeLoading},on:{refreshTable:t.refreshTable,uploadmodify:t.uploadmodify,uploaddelete:t.uploaddelete}})],1):t._e(),t._v(" "),t.toto?t._e():a("div",[a("gante")],1)])},n=[],i={render:s,staticRenderFns:n};e.a=i},VKwz:function(t,e,a){"use strict";var s=a("Sxqw"),n=a.n(s),i=a("T7Jh"),r=a.n(i),o=a("fHpZ"),d=a.n(o),u=a("22xt");console.log(u),e.a={data:function(){return{disDate:[],rightHead:[],pop:{},ganteRightWidth:0,ganttDate:{startDate:"2012-02-07",stopDate:"2012-03-12",loading:!1,leftName:["name","code"]},ganttRowData:[{id:"1111",status:"normal",showEdit:!1,isParent:!0,left:{name:"撒大",code:"454",warn:"sb2",sttr:"sttr"},right:{right_start:"2012-02-12",right_stop:"2012-03-06",progress_date:"2012-02-19"}},{id:"222",status:"normal",showEdit:!1,to:"444",left:{name:"fff",code:"777",warn:"zzcxs",sttr:"sttr"},right:{statusList:[{date:"2012-02-14",status:"B",number:22},{date:"2012-02-15",status:"D",number:33},{date:"2012-02-16",status:"D",number:61},{date:"2012-02-17",status:"C",number:23},{date:"2012-02-18",status:"A",number:64},{date:"2012-02-19",status:"A",number:21},{date:"2012-02-20",status:"B",number:43}]}},{id:"333",status:"normal",showEdit:!1,to:"444",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-16",status:"A",number:44},{date:"2012-02-17",status:"B",number:13},{date:"2012-02-18",status:"B",number:91},{date:"2012-02-19",status:"C",number:17},{date:"2012-02-20",status:"B",number:66},{date:"2012-02-21",status:"D",number:29}]}},{id:"444",status:"normal",showEdit:!1,left:{name:"sda",code:"jhg",warn:"desdgtr",sttr:"cxs"},right:{statusList:[{date:"2012-02-17",status:"A",number:56},{date:"2012-02-18",status:"C",number:17},{date:"2012-02-19",status:"B",number:92},{date:"2012-02-20",status:"A",number:12},{date:"2012-02-21",status:"C",number:35}]}},{id:"555555",status:"normal",showEdit:!1,isParent:!0,left:{name:"23撒大",code:"bb454",warn:"ddsb2",sttr:"desttr"},right:{right_start:"2012-02-10",right_stop:"2012-03-01",progress_date:"2012-02-14"}},{id:"98765",status:"normal",showEdit:!1,to:"999",left:{name:"fff",code:"777",warn:"zzcxs",sttr:"sttr"},right:{statusList:[{date:"2012-02-12",status:"C",number:22},{date:"2012-02-13",status:"B",number:231},{date:"2012-02-14",status:"A",number:11},{date:"2012-02-15",status:"C",number:23},{date:"2012-02-16",status:"A",number:64},{date:"2012-02-17",status:"A",number:11},{date:"2012-02-18",status:"B",number:43}]}},{id:"5342",status:"normal",showEdit:!1,to:"999",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-13",status:"C",number:44},{date:"2012-02-14",status:"C",number:13},{date:"2012-02-15",status:"A",number:91},{date:"2012-02-16",status:"C",number:17},{date:"2012-02-17",status:"A",number:66},{date:"2012-02-18",status:"D",number:29}]}},{id:"83454",status:"normal",showEdit:!1,to:"999",left:{name:"12543",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-12",status:"D",number:33},{date:"2012-02-13",status:"D",number:23},{date:"2012-02-14",status:"B",number:91},{date:"2012-02-15",status:"C",number:27},{date:"2012-02-16",status:"A",number:66},{date:"2012-02-17",status:"B",number:3124675646},{date:"2012-02-18",status:"B",number:54},{date:"2012-02-19",status:"C",number:231},{date:"2012-02-20",status:"D",number:14}]}},{id:"53413542",status:"normal",showEdit:!1,to:"999",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-11",status:"B",number:44},{date:"2012-02-12",status:"B",number:13},{date:"2012-02-13",status:"A",number:91},{date:"2012-02-14",status:"D",number:27},{date:"2012-02-15",status:"A",number:66},{date:"2012-02-16",status:"B",number:29}]}},{id:"999",status:"normal",showEdit:!1,left:{name:"sda",code:"jhg",warn:"desdgtr",sttr:"cxs"},right:{statusList:[{date:"2012-02-15",status:"B",number:56},{date:"2012-02-16",status:"B",number:17},{date:"2012-02-17",status:"A",number:92}]}},{id:"432435432",status:"normal",showEdit:!1,isParent:!0,left:{name:"23撒大",code:"bb454",warn:"ddsb2",sttr:"desttr"},right:{right_start:"2012-02-10",right_stop:"2012-03-01",progress_date:"2012-02-14"}},{id:"8542543",status:"normal",showEdit:!1,to:"345",left:{name:"fff",code:"777",warn:"zzcxs",sttr:"sttr"},right:{statusList:[{date:"2012-02-12",status:"C",number:22},{date:"2012-02-13",status:"B",number:231},{date:"2012-02-14",status:"A",number:11},{date:"2012-02-15",status:"C",number:23},{date:"2012-02-16",status:"A",number:64},{date:"2012-02-17",status:"A",number:11},{date:"2012-02-18",status:"B",number:43}]}},{id:"fsar435",status:"normal",showEdit:!1,to:"345",left:{name:"fff",code:"777",warn:"zzcxs",sttr:"sttr"},right:{statusList:[{date:"2012-02-12",status:"C",number:22},{date:"2012-02-13",status:"B",number:231},{date:"2012-02-14",status:"A",number:11},{date:"2012-02-15",status:"C",number:23},{date:"2012-02-16",status:"A",number:64},{date:"2012-02-17",status:"A",number:11},{date:"2012-02-18",status:"B",number:43}]}},{id:"43kkgf",status:"normal",showEdit:!1,to:"345",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-13",status:"C",number:44},{date:"2012-02-14",status:"C",number:13},{date:"2012-02-15",status:"A",number:91},{date:"2012-02-16",status:"C",number:17},{date:"2012-02-17",status:"A",number:66},{date:"2012-02-18",status:"D",number:29}]}},{id:"6534g",status:"normal",showEdit:!1,to:"345",left:{name:"12543",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-12",status:"D",number:33},{date:"2012-02-13",status:"D",number:23},{date:"2012-02-14",status:"B",number:91},{date:"2012-02-15",status:"C",number:27},{date:"2012-02-16",status:"A",number:66},{date:"2012-02-17",status:"B",number:3124675646},{date:"2012-02-18",status:"B",number:54},{date:"2012-02-19",status:"C",number:231},{date:"2012-02-20",status:"D",number:14}]}},{id:"y4536t42",status:"normal",showEdit:!1,to:"345",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-11",status:"B",number:44},{date:"2012-02-12",status:"B",number:13},{date:"2012-02-13",status:"A",number:91},{date:"2012-02-14",status:"D",number:27},{date:"2012-02-15",status:"A",number:66},{date:"2012-02-16",status:"B",number:29}]}},{id:"345",status:"normal",showEdit:!1,left:{name:"sda",code:"jhg",warn:"desdgtr",sttr:"cxs"},right:{statusList:[{date:"2012-02-15",status:"B",number:56},{date:"2012-02-16",status:"B",number:17},{date:"2012-02-17",status:"A",number:92}]}},{id:"543422dfs",status:"normal",showEdit:!1,isParent:!0,left:{name:"撒大",code:"454",warn:"sb2",sttr:"sttr"},right:{right_start:"2012-02-12",right_stop:"2012-03-06",progress_date:"2012-02-17"}},{id:"dfsxgfsav43",status:"normal",showEdit:!1,to:"111",left:{name:"fff",code:"777",warn:"zzcxs",sttr:"sttr"},right:{statusList:[{date:"2012-02-14",status:"B",number:22},{date:"2012-02-15",status:"D",number:33},{date:"2012-02-16",status:"D",number:61},{date:"2012-02-17",status:"C",number:23},{date:"2012-02-18",status:"A",number:64},{date:"2012-02-19",status:"A",number:21},{date:"2012-02-20",status:"B",number:43}]}},{id:"65fddgsdf",status:"normal",showEdit:!1,to:"111",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-16",status:"A",number:44},{date:"2012-02-17",status:"B",number:13},{date:"2012-02-18",status:"B",number:91},{date:"2012-02-19",status:"C",number:17},{date:"2012-02-20",status:"B",number:66},{date:"2012-02-21",status:"D",number:29}]}},{id:"dsa35476ujhgfd",status:"normal",showEdit:!1,to:"111",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-16",status:"A",number:44},{date:"2012-02-17",status:"B",number:13},{date:"2012-02-18",status:"B",number:91},{date:"2012-02-19",status:"C",number:17},{date:"2012-02-20",status:"B",number:66},{date:"2012-02-21",status:"D",number:29}]}},{id:"765342gfxbvdsabgdfcdsx",status:"normal",showEdit:!1,to:"111",left:{name:"54353",code:"jghhf",warn:"sb2",sttr:"fdsd"},right:{statusList:[{date:"2012-02-13",status:"D",number:44},{date:"2012-02-14",status:"C",number:13},{date:"2012-02-15",status:"B",number:91},{date:"2012-02-16",status:"A",number:321}]}},{id:"111",status:"normal",showEdit:!1,left:{name:"sda",code:"jhg",warn:"desdgtr",sttr:"cxs"},right:{statusList:[{date:"2012-02-17",status:"A",number:56},{date:"2012-02-18",status:"C",number:17},{date:"2012-02-19",status:"B",number:92},{date:"2012-02-20",status:"A",number:12},{date:"2012-02-21",status:"C",number:35}]}}]}},props:{},created:function(){this.init()},mounted:function(){this.ganteRightWidth=.75*window.document.body.offsetWidth,this.createLine()},methods:{willDragStart:function(t){function e(t){n.disX=t.clientX-s,n.ganteRightWidth=i-n.disX}function a(){window.document.removeEventListener("mousemove",e),window.document.removeEventListener("mouseup",a)}var s=t.clientX,n=this,i=n.ganteRightWidth;window.document.addEventListener("mousemove",e),window.document.addEventListener("mouseup",a)},init:function(){this.cleanRightDate()},cleanRightDate:function(){var t=this.getDisDate(this.ganttDate.startDate,this.ganttDate.stopDate);this.disDate=t,this.rightHead=function(t){for(var e=[],a=d()(new r.a([].concat(n()(t)).map(function(t){return t.slice(0,7)}))).sort(),s=0;s<a.length;s++){e[s]={yearmonth:a[s],date:[]};for(var i=0;i<t.length;i++)t[i].indexOf(a[s])>-1&&e[s].date.push(t[i].slice(8));e[s].date.sort()}return e}(t)},getDisDate:function(t,e){function a(t){var e=t.split("-");return new Date(e[0],e[1]-1,e[2])}for(var s=[],n=0,i=a(t),r=a(e);r.getTime()-i.getTime()>=0;){var o=i.getFullYear(),d=1==(i.getMonth()+1).toString().length?"0"+(i.getMonth()+1).toString():(i.getMonth()+1).toString(),u=1==i.getDate().toString().length?"0"+i.getDate():i.getDate();s[n]=o+"-"+d+"-"+u,i.setDate(i.getDate()+1),n+=1}return s},isInStatusList:function(t,e){if(void 0==e.statusList)return!1;for(var a=0;a<e.statusList.length;a++)if(e.statusList[a].date==t)return e.statusList[a];return!1},createCoord:function(){for(var t=[].concat(n()(this.ganttRowData)),e=[],a=0;a<t.length;a++)if(!t[a].isParent){for(var s=a,i=0,r=0;r<t.length;r++)if(t[r].id==t[a].to){i=r;break}e.push({id:t[a].id,to:t[a].to?t[a].to:0,vCount:0==i?null:i-s,start:t[a].right.statusList[0].date,stop:t[a].right.statusList[t[a].right.statusList.length-1].date})}return e},createLine:function(){function t(t,a,s,n){function l(t,e){var a=e-t+1;return Math.floor(Math.random()*a+t)}for(var c=this,h=[],f=0;f<d.length;f++)for(var p=0;p<s.length;p++)d[f].id==s[p]&&h.push(d[f]);for(var m=!1,v=-1,g=["#a026e9","#ff2e2e","#31d016","#258dd9","#f5a40b"],b=l(0,g.length-1),_=0;_<h.length;_++)0!=h[_].to&&function(){var s=e(h[_].stop,t);0==m&&h[_].stop==a&&(m=!0,v=_);var d=c.$refs[h[_].id+"_"+h[_].stop][0],f=d.offsetLeft+r+4,p=d.offsetTop+o/2+2,w=g[b],C=i.paper.circle(f,1*p+1,1).attr({fill:w,cx:f});if(setTimeout(function(){C.animate({r:3.5},1400,mina.bounce)},Math.min(500*(1*_+1),1800)),_==v){var x=i.paper.path("\n                  M"+f+", "+(1*p+1)+"L"+(1*f+r/2+r*s)+", "+(1*p+1)+"L"+(1*f+r/2+r*s)+", "+(1*p+1+1*o/2+o*(h[_].vCount-1))+"L"+(1*f+r/2+r*s-r*(1*e(n.start,t)+2))+", "+(1*p+1+1*o/2+o*(h[_].vCount-1))+"L"+(1*f+r/2+r*s-r*(1*e(n.start,t)+2))+","+(1*p+1+1*o/2+o*(h[_].vCount-1)+o/2)+"L"+(1*f+r/2+r*s-r*(1*e(n.start,t)+2)+r/2-4)+",\n                  "+(1*p+1+1*o/2+o*(h[_].vCount-1)+o/2)).attr({stroke:w,strokeWidth:2,fill:"none"}),k=u.path.getTotalLength(x);x.attr({"stroke-dashoffset":k,"stroke-dasharray":k}),setTimeout(function(){u.animate(k,0,function(t){x.attr({"stroke-dashoffset":t})},1500,mina.easeout())},Math.min(600*l(0,8),1800))}else{var D=i.paper.path("M"+f+", "+(1*p+1)+"L"+(1*f+r/2+r*s)+", "+(1*p+1)).attr({stroke:w,strokeWidth:2,fill:"none"}),L=u.path.getTotalLength(D);D.attr({"stroke-dashoffset":L,"stroke-dasharray":L}),setTimeout(function(){u.animate(L,0,function(t){D.attr({"stroke-dashoffset":t})},1500,mina.easeout())},Math.min(250*l(0,2),500))}_==v&&i.paper.circle(1*f+r/2+r*s-r*(1*e(n.start,t)+2)+r/2-9,1*p+1*o/2+o*(h[_].vCount-1)+o/2+1,2).attr({fill:w})}()}function e(t,e){var a=new Date(Date.parse(t.replace(/-/g,"/"))).getTime(),s=new Date(Date.parse(e.replace(/-/g,"/"))).getTime();return Math.abs(a-s)/864e5}var a=this,s=window.document.querySelector(".right-table-head"),i=u(s.offsetWidth,s.offsetHeight),r=34,o=24;i.node.style.position="absolute",i.node.style.left="0px",i.node.style.top="0px",i.node.style["z-index"]="-1",s.appendChild(i.node);for(var d=this.createCoord(),l=[],c=[],h=0;h<d.length;h++)if(0!=d[h].to)l.push(d[h].stop),c.push(d[h].id);else{for(var f=l[0],p=l[0],m=0;m<l.length;m++)f<l[m]&&(f=l[m]),p>l[h]&&(p=l[h]);t.call(this,f,p,c,d[h]),c=[],l=[]}for(var v=["#37c020","#ccc9bb"],g=[].concat(n()(this.ganttRowData)).filter(function(t){return 1==t.isParent}),b=0;b<g.length;b++)!function(t){var s=a.$refs["ptr_"+g[t].id+"_"+g[t].right.right_start+"_"+g[t].right.progress_date+"_"+g[t].right.right_stop][0],n=e(g[t].right.right_start,g[t].right.progress_date),d=s.querySelector(".progress").parentNode,l=d.offsetLeft,c=d.offsetTop,h=i.paper.path("M"+l+","+(1*c+12)+"L"+(1*l+r*n*1+5)+","+(1*c+12)).attr({stroke:v[0],strokeWidth:o-8,fill:"none"}),f=u.path.getTotalLength(h);h.attr({"stroke-dashoffset":f,"stroke-dasharray":f}),u.animate(f,0,function(t){h.attr({"stroke-dashoffset":t})},1e3,mina.linear());var p=e(g[t].right.progress_date,g[t].right.right_stop),m=s.querySelector(".progress-normal").parentNode,b=m.offsetLeft,_=m.offsetTop,w=i.paper.path("M"+b+","+(1*_+12)+"L"+(1*b+r*p*1+5)+","+(1*_+12)).attr({stroke:v[1],strokeWidth:o-8,fill:"none"}),C=u.path.getTotalLength(w);w.attr({"stroke-dashoffset":C,"stroke-dasharray":C}),setTimeout(function(){u.animate(C,0,function(t){w.attr({"stroke-dashoffset":t})},1e3,mina.easeinout())},1e3)}(b)}},components:{}}},VvTB:function(t,e,a){"use strict";function s(t){a("9Smb")}var n=a("VKwz"),i=a("YbYA"),r=a("mPyB"),o=s,d=r(n.a,i.a,!1,o,"data-v-6dff1120",null);e.a=d.exports},YbYA:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"gante-warp"},[a("div",{staticClass:"gante-left"},[a("table",{staticClass:"left-table",attrs:{cellspacing:"0",cellpadding:"0"}},[a("tr",{staticClass:"thead"},t._l(t.ganttDate.leftName,function(e,s){return a("th",{key:s},[a("div",[t._v(t._s(e))])])})),t._v(" "),t._l(t.ganttRowData,function(e,s){return a("tr",{key:s,staticClass:"tbody"},t._l(t.ganttDate.leftName,function(s,n){return a("td",{key:n},[a("div",{class:[e.isParent?"parentLeft":"norLeft"]},[t._v(t._s(e.left[s]))])])}))})],2)]),t._v(" "),a("div",{staticStyle:{position:"relative"}},[a("span",{staticClass:"drag-cursor",on:{mousedown:function(e){t.willDragStart(e)}}}),t._v(" "),a("div",{staticClass:"gante-right",style:{width:t.ganteRightWidth+"px"}},[a("div",[a("table",{staticClass:"right-table-head",attrs:{cellspacing:"0",cellpadding:"0"}},[a("thead",[a("tr",{staticClass:"gante-head-year"},t._l(t.rightHead,function(e,s){return a("td",{key:s,attrs:{colspan:e.date.length}},[a("div",[t._v(t._s(e.yearmonth))])])})),t._v(" "),a("tr",{staticClass:"gante-head-date"},[t._l(t.rightHead,function(e,s){return t._l(e.date,function(e,s){return a("td",{key:s},[a("div",[t._v(t._s(e))])])})})],2)]),t._v(" "),a("tbody",t._l(t.ganttRowData,function(e,s){return a("tr",{key:s,ref:"ptr_"+e.id+"_"+(e.right.right_start||"null")+"_"+(e.right.progress_date||"null")+"_"+(e.right.right_stop||"null"),refInFor:!0,staticClass:"tbody tbody-right"},[1==e.isParent?t._l(t.disDate,function(s){return a("td",{key:s},[a("div",{class:{"progress-normal":s>=e.right.progress_date&&s<=e.right.right_stop,progress:s>=e.right.right_start&&s<=e.right.right_stop}},[a("span",[t._v(" ")])])])}):t._l(t.disDate,function(s,n){return a("td",{key:s,ref:e.id+"_"+s,refInFor:!0},[0==t.isInStatusList(s,e.right)?a("div",[t._v("\n                     \n                  ")]):a("div",{class:{A:"A"==t.isInStatusList(s,e.right).status,B:"B"==t.isInStatusList(s,e.right).status,C:"C"==t.isInStatusList(s,e.right).status,D:"D"==t.isInStatusList(s,e.right).status}},[a("span",{staticClass:"popover",on:{mouseenter:function(a){t.$set(t.pop,e.id+"_"+s,!0)},mouseleave:function(a){t.$set(t.pop,e.id+"_"+s,!1)}}},[t.pop[e.id+"_"+s]?a("i",{staticClass:"pop"},[t._v("\n                        "+t._s(s)+"\n                        "),a("br"),t._v("\n                        "+t._s("进度："+t.isInStatusList(s,e.right).number)+"\n                      ")]):t._e(),t._v(" "),(t.isInStatusList(s,e.right).number+"").length>3?a("i",[t._v("\n                        "+t._s((t.isInStatusList(s,e.right).number+"").slice(0,3)+"...")+"\n                      ")]):a("i",[t._v("\n                        "+t._s(t.isInStatusList(s,e.right).number)+"\n                      ")])])])])})],2)}))])])])])])},n=[],i={render:s,staticRenderFns:n};e.a=i},YooD:function(t,e){},dYPY:function(t,e,a){"use strict";var s=a("EXDq");e.a={name:"app",components:{test:s.a}}},fDRT:function(t,e,a){"use strict";var s=a("fjjs"),n=a.n(s),i=a("Sz5k"),r=a("VvTB");e.a={data:function(){return{toto:!0,columns:[{name:"ID",prop:"id",width:50},{name:"删除",delete:!0},{name:"name字段",prop:"name",width:260,isTree:!0,edit:!0},{name:"操作",operate:!0},{name:"url",prop:"url",edit:!0}],data:[],needUpdate:Date.now(),treeLoading:!1}},created:function(){var t=this;this.treeLoading=!0,this.$http.get("static/menu.json").then(function(e){setTimeout(function(){t.treeLoading=!1,t.data=e.data,t.needUpdate=Date.now()},1400)})},methods:{refreshTable:function(){var t=this;this.treeLoading=!0,this.$http.get("static/menu.json").then(function(e){setTimeout(function(){t.treeLoading=!1,t.data=e.data,t.needUpdate=Date.now()},1400)})},uploadmodify:function(t){var e=n()(t,3),a=e[0],s=e[1],i=e[2];console.log(a),setTimeout(function(){Math.random()>.1?s():i()},1100)},uploaddelete:function(t){var e=n()(t,3),a=e[0],s=e[1],i=e[2];console.log(a),setTimeout(function(){Math.random()>.1?s():i()},1100)}},components:{treeGrid:i.a,gante:r.a}}},iOHE:function(t,e){},kq5j:function(t,e,a){"use strict";function s(t){var e=[].concat(b()(t)),a=0,s=[];if(0==e.length)return[];e.forEach(function(t){t.level>a&&(a=t.level)}),e=e.map(function(t){return t.children=[],t.show=!0,t});for(var n=0;n<=a;n++)!function(t){s[t]=[],e.forEach(function(e){e.level==t&&s[t].push(e)})}(n);for(var n=s.length-1;n>=0;n--)for(var i=0;i<s[n].length;i++)!function(t,e){if(0!=e)for(var a=e-1,n=0;n<s[a].length;n++)s[a][n].id==t.parentid&&(s[a][n].icon=!0,s[a][n].children.push(t))}(s[n][i],n);return s[0]}function n(t){function e(t){if(0!=t.children.length)for(var a=0;a<t.children.length;a++)s.push(t.children[a]),e(t.children[a])}for(var a=[].concat(b()(t)),s=[],n=0;n<a.length;n++)s.push(a[n]),e(a[n]);return s}var i=a("9PQg"),r=a.n(i),o=a("u6qr"),d=a.n(o),u=a("SUjy"),l=a.n(u),c=a("fjjs"),h=a.n(c),f=a("07sj"),p=a.n(f),m=a("34v0"),v=a.n(m),g=a("Sxqw"),b=a.n(g);e.a={name:"treeGrid",props:{columns:{require:!0,type:Array},rowdata:{require:!0,type:Array},needUpdate:{require:!0},treeLoading:{default:!1}},data:function(){return{column:[],data:[],data_format:null,operate:{},hoverBtn:{},operateStatus:{},uploading:{},lineValue:{},checkboxControl:{},deleteIdArr:[],deleteBtnDisable:!1,refreshBtnDisable:!1}},filters:{timestamp__:function(t){return-1!=(t+"").indexOf("__timestamp__")?" - ":t}},created:function(){this.column=[].concat(b()(this.columns))},watch:{needUpdate:function(){this.init()}},methods:{refreshTable:function(){this.refreshBtnDisable=!0,this.deleteBtnDisable=!0,this.$emit("refreshTable")},init:function(){if(0!=this.rowdata.length){this.refreshBtnDisable=!1,this.deleteBtnDisable=!1,this.data=n(s([].concat(b()(this.rowdata))));var t=v()({},this.data[0]);for(var e in t)t.hasOwnProperty(e)&&(t[e]="");this.data_format=t,this.initValue()}},initValue:function(){for(var t=[].concat(b()(this.data)),e=[].concat(b()(this.column)),a=0;a<t.length;a++){this.$set(this.checkboxControl,"active"+t[a].id,!1);for(var s=0;s<e.length;s++)1==e[s].edit&&this.$set(this.lineValue,"lineValue"+e[s].prop+t[a].id,t[a][e[s].prop])}},rowMouseEnter:function(t){this.$set(this.operate,"operate"+t,!0)},rowMouseLeave:function(t){this.$set(this.operate,"operate"+t,!1)},mouseHover:function(t,e){1==e?this.$set(this.hoverBtn,"hoverBtn"+t,!0):2==e&&this.$set(this.hoverBtn,"hoverBtn"+t,!1)},willDragStart:function(t,e){function a(e){n.moveClientX=e.clientX;for(var a=n.moveClientX-n.startClientX,s=[].concat(b()(n.column)),r=0;r<s.length;r++)if(s[r].prop==t.prop){s[r].width=1*i+1*a;break}n.column=s}function s(){window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",s)}if(void 0!=t.prop&&void 0!=t.width){this.startClientX=e.clientX,this.colItem=v()({},t);var n=this,i=t.width;window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",s),window.addEventListener("mousemove",a),window.addEventListener("mouseup",s)}},expand:function(t,e){for(var a=[].concat(b()(this.data)),s=null,n=0;n<a.length;n++)if(a[n].id==t.id){a[n].icon=e;for(var i=p.a,r=n,o=a[n].level;;){if(r++,s=r,void 0==a[r])break;if(0==e){if(!(a[r].level>o))break;a[r].show=!1}else{if(!(a[r].level>o))break;if(a[r].level>i)continue;a[r].level==i&&(i=p.a),0==a[r].icon&&(i=a[r].level),a[r].show=!0}}}return this.data=a,[s,a]},inputEdit:function(t,e,a){for(var s=[].concat(b()(this.data)),n=([].concat(b()(this.column)),0);n<s.length;n++)if(s[n].id==t){s[n].editing=!0;break}this.data=s,this.$set(this.lineValue,"lineValue"+e+t,a.target.value)},operateBtn:function(t){this.$set(this.operateStatus,"status"+t,!0)},saveBtn:function(t){for(var e=[].concat(b()(this.data)),a=[].concat(b()(this.column)),s=0;s<e.length;s++)if(e[s].id==t){1==e[s].editing&&(e[s].modify=!0);for(var n=0;n<a.length;n++)1==a[n].edit&&(e[s][a[n].prop]=this.lineValue["lineValue"+a[n].prop+t]);break}this.data=e,this.$set(this.operateStatus,"status"+t,!1)},cancel:function(t){for(var e=[].concat(b()(this.data)),a=[].concat(b()(this.column)),s=0;s<e.length;s++)if(e[s].id==t){for(var n=0;n<a.length;n++)1==a[n].edit&&(this.lineValue["lineValue"+a[n].prop+t]=e[s][a[n].prop]);break}this.$set(this.operateStatus,"status"+t,!1)},upload:function(t){function e(){for(var e=[].concat(b()(this.data)),a=([].concat(b()(this.column)),0);a<e.length;a++)if(e[a].id==t){e[a].modify=!1,e[a].editing=!1;break}this.data=e,this.$set(this.uploading,"uploading"+t,!1),this.creatTipDom("上传成功！","success")}function a(){this.$set(this.uploading,"uploading"+t,!1),this.creatTipDom("上传失败，请重试！","error")}for(var s=[].concat(b()(this.data)),n=0;n<s.length;n++)s[n].id==t&&(this.$set(this.uploading,"uploading"+t,!0),this.$emit("uploadmodify",[s[n],e.bind(this),a.bind(this)]));this.rowMouseLeave(t)},addLine:function(t,e){if(1==e){for(var a=[].concat(b()(this.data)),s=null,n=0;n<a.length;n++)a[n].id==t&&(s=a[n]);var i=this.expand(s,!1),r=h()(i,2),o=r[0],d=r[1],u=Date.now()+"__timestamp__",c=v()({},this.data_format,{id:u,level:s.level,parentid:s.parentid,modify:!0,show:!0,children:[]}),f=a.filter(function(t){return t.id==c.parentid})[0];void 0!=f&&(this.$set(this.checkboxControl,"active"+c.id,this.checkboxControl["active"+f.id]),this.checkboxControl["active"+c.id]&&this.deleteIdArr.push(c.id)),d.splice(o,0,c),this.$set(this.operateStatus,"status"+u,!0),this.data=d}else if(2==e){for(var p=[].concat(b()(this.data)),m=null,g=null,_=0;_<p.length;_++)p[_].id==t&&(p[_].children=[!0],m=p[_],m.icon=!0,g=_);var w=Date.now()+"__timestamp__;",C=this.expand(m,!0),x=h()(C,2),k=(x[0],x[1]),D=v()({},this.data_format,{id:w,level:l()(m.level)+1,parentid:m.id,modify:!0,show:!0,children:[]}),L=p.filter(function(t){return t.id==D.parentid})[0];this.$set(this.checkboxControl,"active"+D.id,this.checkboxControl["active"+L.id]),this.checkboxControl["active"+D.id]&&this.deleteIdArr.push(D.id),k.splice(l()(g)+1,0,D),this.$set(this.operateStatus,"status"+w,!0),this.data=k}},checkbox_change:function(t){var e=this;if(!this.deleteBtnDisable){var a=this.checkboxControl["active"+t];this.$set(this.checkboxControl,"active"+t,!a);if(!a){for(var s=[].concat(b()(this.data)),n=0;n<s.length;n++)if(s[n].id==t){for(var i=n,r=s[n].level;;){if(i++,void 0==s[i])break;if(!(s[i].level>r))break;this.$set(this.checkboxControl,"active"+s[i].id,!0)}break}}else!function(){for(var a=[].concat(b()(e.data)),s=0;s<a.length;s++)if(a[s].id==t){var n=function(){var t=function t(e){if(this.$set(this.checkboxControl,"active"+e.parentid,!1),e.parentid!=e.id)for(var s=0;s<a.length;s++)a[s].id==e.parentid&&t.call(this,a[s])},n=s,i=a[s].level;for(e.$set(e.checkboxControl,"active"+a[s].parentid,!1);;){if(n++,void 0==a[n])break;if(!(a[n].level>i))break;e.$set(e.checkboxControl,"active"+a[n].id,!1)}return t.call(e,a[s]),"break"}();if("break"===n)break}}();this.deleteIdArr=[];for(var o in this.checkboxControl)this.checkboxControl.hasOwnProperty(o)&&1==this.checkboxControl[o]&&this.deleteIdArr.push(o.split("active")[1])}},removeLine:function(){function t(){var t=this,e=[].concat(b()(this.data)),a=[].concat(b()(this.deleteIdArr));a.map(function(t){return t+=""});for(var s=0;s<a.length;s++)this.$set(this.uploading,"uploading"+a[s],!1);var n=!0,i=!1,o=void 0;try{for(var u,l=d()(r()(this.checkboxControl));!(n=(u=l.next()).done);n=!0){var c=u.value,f=h()(c,2),p=f[0];f[1];!function(e,s){a.forEach(function(a){e.split("active")[1]==a&&delete t.checkboxControl[e]})}(p)}}catch(t){i=!0,o=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}for(var m=e.filter(function(t){for(var e=0;e<a.length;e++)if(a[e]+""==t.id+"")return!1;return!0}),v=0;v<m.length;v++)void 0!=m[v+1]?m[v+1].level<=m[v].level&&(delete m[v].icon,m[v].children=[]):void 0==m[v+1]&&(delete m[v].icon,m[v].children=[]);this.deleteIdArr=[],this.deleteBtnDisable=!1,this.data=m,this.creatTipDom("删除成功！","success")}function e(){for(var t=0;t<this.deleteIdArr.length;t++)this.$set(this.uploading,"uploading"+this.deleteIdArr[t],!1);this.deleteBtnDisable=!1,this.creatTipDom("删除失败，请重试！","error")}var a=[].concat(b()(this.deleteIdArr));if(0!=a.length){this.deleteBtnDisable=!0;for(var s=0;s<a.length;s++)this.$set(this.uploading,"uploading"+a[s],!0);this.$emit("uploaddelete",[a,t.bind(this),e.bind(this)])}},creatTipDom:function(t,e){var a=this,s=null,n=null;"success"==e?(s='<i class="fa fa-check-circle" aria-hidden="true"></i>&nbsp; '+t,n="#40b965"):"error"==e&&(s='<i class="fa fa-times-circle" aria-hidden="true"></i>&nbsp;'+t,n="#da8b29");var i=window.document.createElement("div");i.className="__tip-dom__-wrap",i.innerHTML='<div class="__tip-dom__" style="text-align: center;height: 32px;padding-left: 12px;padding-right: 12px;line-height: 32px;background: '+n+';color: #fff;position: fixed;z-index: 10010;left: 50%;transform: translateX(-50%);top: -42px; transition: all .4s;"> '+s+" </div>",this.$refs.tree.appendChild(i),setTimeout(function(){window.document.querySelector(".__tip-dom__").style.top="14px",setTimeout(function(){window.document.querySelector(".__tip-dom__").style.top="-42px",setTimeout(function(){var t=window.document.querySelector(".__tip-dom__-wrap");a.$refs.tree.removeChild(t)},500)},2e3)},0)}}}}},["NHnr"]);
//# sourceMappingURL=app.144da42830258cfba7ed.js.map