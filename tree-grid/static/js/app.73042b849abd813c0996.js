webpackJsonp([1],{0:function(t,e){},"6VpE":function(t,e){},"7UNn":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"tree",staticClass:"tree-wrap"},[i("div",{staticClass:"tree"},[i("ul",{staticClass:"table-header"},t._l(t.column,function(e,a){return i("li",{key:a,staticClass:"nowrap",style:[{width:e.width?e.width+"px":1==e.delete||1==e.operate?"50px":"",flex:e.width?"none":1==e.delete||1==e.operate?"none":1,padding:1==e.operate||1==e.delete?"0px":"0px 10px","min-width":1==e.operate||1==e.delete?"40px":"100px"}]},[1==e.operate?[i("i",{staticClass:"fa fa-cogs",staticStyle:{transform:"translateX(-12px)"},attrs:{"aria-hidden":"true"}})]:1==e.delete?i("span",[i("button",{staticClass:"btn-delete",attrs:{title:"删除所选项",disabled:t.deleteBtnDisable},on:{click:t.removeLine}},[t.deleteBtnDisable?i("i",{staticClass:"fa fa-spin fa-spinner",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.deleteBtnDisable?t._e():i("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])]):i("span",[e.isTree?i("span",[i("button",{staticClass:"btn-refresh",attrs:{title:"刷新",disabled:t.refreshBtnDisable},on:{click:t.refreshTable}},[i("i",{staticClass:"fa fa-refresh",class:{"fa-spin":!!t.refreshBtnDisable},attrs:{"aria-hidden":"true"}})]),t._v("\r\n                     \r\n                ")]):t._e(),t._v("\r\n                "+t._s(e.name)+"\r\n            ")]),t._v(" "),i("span",{staticClass:"w-resize",on:{mousedown:function(i){t.willDragStart(e,i)}}})],2)})),t._v(" "),i("ul",{staticClass:"table-body"},t._l(t.data,function(e,a){return i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"rowItem.show"}],key:e.id,staticClass:"table-body-li-wrap",on:{mouseleave:function(i){t.rowMouseLeave(e.id)},mouseenter:function(i){t.rowMouseEnter(e.id)}}},[1==t.uploading["uploading"+e.id]?i("div",{staticClass:"uploading"},[i("i",{staticClass:"fa fa-spin fa-spinner",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),i("div",{staticStyle:{display:"flex"}},t._l(t.column,function(a,n){return i("li",{key:n,staticClass:"table-body-li nowrap",class:{modify:1==e.modify},style:[{width:a.width?a.width+"px":1==a.delete||1==a.operate?"50px":"",flex:a.width?"none":1==a.delete||1==a.operate?"none":1,padding:1==a.operate?"0px":"0px 10px","padding-left":a.isTree?24*e.level+14+"px":1==a.operate?"0px":"14px",overflow:1==a.operate?"visible":"","min-width":1==a.operate||1==a.delete?"40px":"100px"}]},[a.isTree&&0!=e.children.length?[i("span",{directives:[{name:"show",rawName:"v-show",value:0==e.icon,expression:"rowItem.icon == false"}],on:{click:function(i){t.expand(e,!0)}}},[i("i",{staticClass:"fa fa-plus-square",attrs:{"aria-hidden":"true"}})]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.icon,expression:"rowItem.icon == true"}],on:{click:function(i){t.expand(e,!1)}}},[i("i",{staticClass:"fa fa-minus-square",attrs:{"aria-hidden":"true"}})])]:t._e(),t._v(" "),a.edit||a.isTree||a.operate||a.delete||"id"==a.prop?t._e():i("span",[t._v(" "+t._s(e[a.prop])+" ")]),t._v(" "),a.edit||a.isTree||a.operate||a.delete||"id"!=a.prop?t._e():i("span",[t._v(" "+t._s(t._f("timestamp__")(e[a.prop]))+" ")]),t._v(" "),a.edit?[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.operateStatus["status"+e.id],expression:"!operateStatus['status'+rowItem.id]"}],staticClass:"no-wrap",staticStyle:{"text-align":"left"},attrs:{title:e[a.prop]}},[t._v("\r\n                            "+t._s(e[a.prop])+"\r\n                        ")]),t._v(" "),i("input",{directives:[{name:"show",rawName:"v-show",value:t.operateStatus["status"+e.id],expression:"operateStatus['status'+rowItem.id]"}],style:{width:a.isTree?"auto":"100%"},attrs:{type:"text"},domProps:{value:t.lineValue["lineValue"+a.prop+e.id]},on:{input:function(i){t.inputEdit(e.id,a.prop,i)}}})]:t._e(),t._v(" "),a.operate?[i("span",{staticClass:"hover-btn",on:{mouseover:function(i){t.mouseHover(e.id,1)},mouseout:function(i){t.mouseHover(e.id,2)}}},[t._m(0,!0),t._v(" "),i("transition",{attrs:{name:"as"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.hoverBtn["hoverBtn"+e.id],expression:"hoverBtn['hoverBtn'+rowItem.id]"}],staticClass:"col-btn-group"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!t.operateStatus["status"+e.id],expression:"!operateStatus['status'+rowItem.id]"}]},[i("button",{staticClass:"btn-edit",on:{click:function(i){t.operateBtn(e.id)}}},[i("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),t._v(" 编辑\r\n                                        ")]),t._v(" "),i("button",{staticClass:"btn-add",on:{click:function(i){t.addLine(e.id,1)}}},[i("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),t._v(" 增加同级\r\n                                        ")]),t._v(" "),i("button",{staticClass:"btn-add",on:{click:function(i){t.addLine(e.id,2)}}},[i("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}}),t._v(" 增加下级\r\n                                        ")]),t._v(" "),e.modify?i("button",{staticClass:"btn-upload",on:{click:function(i){t.upload(e.id)}}},[i("i",{staticClass:"fa fa-cloud-upload",attrs:{"aria-hidden":"true"}}),t._v(" 上传\r\n                                        ")]):t._e()]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!!t.operateStatus["status"+e.id],expression:"!!operateStatus['status'+rowItem.id]"}]},[i("button",{staticClass:"btn-confirm",on:{click:function(i){t.saveBtn(e.id)}}},[i("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),t._v(" 确认\r\n                                        ")]),t._v(" "),i("button",{staticClass:"btn-cancel",on:{click:function(i){t.cancel(e.id)}}},[i("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),t._v(" 撤销\r\n                                        ")])])])])],1)]:t._e(),t._v(" "),a.delete?[i("span",{staticClass:"checkbox-span",class:{active:t.checkboxControl["active"+e.id]},on:{click:function(i){t.checkbox_change(e.id)}}},[t.checkboxControl["active"+e.id]?i("i",{staticClass:"fa fa-check-circle",attrs:{"aria-hidden":"true"}}):t._e(),t._v(" "),t.checkboxControl["active"+e.id]?t._e():i("i",{staticClass:"fa fa-circle-o",attrs:{"aria-hidden":"true"}})])]:t._e(),t._v(" "),e.modify&&0==n?[t._m(1,!0)]:t._e()],2)}))])})),t._v(" "),0==t.data.length?i("div",{staticClass:"no-data"},[i("i",{staticClass:"fa fa-file-o",attrs:{"aria-hidden":"true"}}),t._v("  数据为空\r\n    ")]):t._e()]),t._v(" "),t.treeLoading&&0!=t.data.length?i("div",{staticClass:"tree-loading"},[i("i",{staticClass:"fa fa-spinner fa-spin",attrs:{"aria-hidden":"true"}})]):t._e()])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"hover-btn-span"},[t._v("\r\n                                 "),i("i",{staticClass:"fa fa-pencil-square",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"modify-pin"},[i("span",{staticClass:"modify-pin-title"},[t._v("记得上传")]),t._v(" "),i("i",{staticClass:"fa fa-exclamation",attrs:{"aria-hidden":"true"}})])}],s={render:a,staticRenderFns:n};e.a=s},"84Yf":function(t,e){},EXDq:function(t,e,i){"use strict";var a=i("fDRT"),n=i("Up5l"),s=i("mPyB"),r=s(a.a,n.a,!1,null,null,null);e.a=r.exports},LV8r:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("test")],1)},n=[],s={render:a,staticRenderFns:n};e.a=s},M93x:function(t,e,i){"use strict";function a(t){i("84Yf")}var n=i("dYPY"),s=i("LV8r"),r=i("mPyB"),o=a,l=r(n.a,s.a,!1,o,null,null);e.a=l.exports},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("f0wq"),n=i("M93x"),s=i("/oTv"),r=i("6VpE"),o=(i.n(r),i("iOHE"));i.n(o);a.a.use(s.a),a.a.config.productionTip=!1,new a.a({el:"#app",template:"<App/>",components:{App:n.a}})},Sz5k:function(t,e,i){"use strict";function a(t){i("YooD")}var n=i("kq5j"),s=i("7UNn"),r=i("mPyB"),o=a,l=r(n.a,s.a,!1,o,"data-v-250d2370",null);e.a=l.exports},Up5l:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("tree-grid",{attrs:{columns:t.columns,rowdata:t.data,needUpdate:t.needUpdate,treeLoading:t.treeLoading},on:{refreshTable:t.refreshTable,uploadmodify:t.uploadmodify,uploaddelete:t.uploaddelete}})],1)},n=[],s={render:a,staticRenderFns:n};e.a=s},YooD:function(t,e){},dYPY:function(t,e,i){"use strict";var a=i("EXDq");e.a={name:"app",components:{test:a.a}}},fDRT:function(t,e,i){"use strict";var a=i("fjjs"),n=i.n(a),s=i("Sz5k");e.a={data:function(){return{columns:[{name:"ID",prop:"id",width:120},{name:"删除",delete:!0},{name:"name字段",prop:"name",width:260,isTree:!0,edit:!0},{name:"操作",operate:!0},{name:"level",prop:"level",width:120},{name:"url",prop:"url",edit:!0}],data:[],needUpdate:Date.now(),treeLoading:!1}},created:function(){var t=this;this.treeLoading=!0,this.$http.get("static/menu.json").then(function(e){setTimeout(function(){t.treeLoading=!1,t.data=e.data,t.needUpdate=Date.now()},1400)})},methods:{refreshTable:function(){var t=this;this.treeLoading=!0,this.$http.get("static/menu.json").then(function(e){setTimeout(function(){t.treeLoading=!1,t.data=e.data,t.needUpdate=Date.now()},1400)})},uploadmodify:function(t){var e=n()(t,3),i=e[0],a=e[1],s=e[2];console.log(i),setTimeout(function(){Math.random()>.1?a():s()},1100)},uploaddelete:function(t){var e=n()(t,3),i=e[0],a=e[1],s=e[2];console.log(i),setTimeout(function(){Math.random()>.1?a():s()},1100)}},components:{treeGrid:s.a}}},iOHE:function(t,e){},kq5j:function(t,e,i){"use strict";function a(t){var e=[].concat(w()(t)),i=0,a=[];if(0==e.length)return[];e.forEach(function(t){t.level>i&&(i=t.level)}),e=e.map(function(t){return t.children=[],t.show=!0,t});for(var n=0;n<=i;n++)!function(t){a[t]=[],e.forEach(function(e){e.level==t&&a[t].push(e)})}(n);for(var n=a.length-1;n>=0;n--)for(var s=0;s<a[n].length;s++)!function(t,e){if(0!=e)for(var i=e-1,n=0;n<a[i].length;n++)a[i][n].id==t.parentid&&(a[i][n].icon=!0,a[i][n].children.push(t))}(a[n][s],n);return a[0]}function n(t){function e(t){if(0!=t.children.length)for(var i=0;i<t.children.length;i++)a.push(t.children[i]),e(t.children[i])}for(var i=[].concat(w()(t)),a=[],n=0;n<i.length;n++)a.push(i[n]),e(i[n]);return a}var s=i("9PQg"),r=i.n(s),o=i("u6qr"),l=i.n(o),d=i("SUjy"),c=i.n(d),u=i("fjjs"),h=i.n(u),p=i("07sj"),f=i.n(p),v=i("34v0"),m=i.n(v),_=i("Sxqw"),w=i.n(_);e.a={name:"treeGrid",props:{columns:{require:!0,type:Array},rowdata:{require:!0,type:Array},needUpdate:{require:!0},treeLoading:{default:!1}},data:function(){return{column:[],data:[],data_format:null,operate:{},hoverBtn:{},operateStatus:{},uploading:{},lineValue:{},checkboxControl:{},deleteIdArr:[],deleteBtnDisable:!1,refreshBtnDisable:!1}},filters:{timestamp__:function(t){return-1!=(t+"").indexOf("__timestamp__")?" - ":t}},created:function(){this.column=[].concat(w()(this.columns))},watch:{needUpdate:function(){this.init()}},methods:{refreshTable:function(){this.refreshBtnDisable=!0,this.deleteBtnDisable=!0,this.$emit("refreshTable")},init:function(){if(0!=this.rowdata.length){this.refreshBtnDisable=!1,this.deleteBtnDisable=!1,this.data=n(a([].concat(w()(this.rowdata))));var t=m()({},this.data[0]);for(var e in t)t.hasOwnProperty(e)&&(t[e]="");this.data_format=t,this.initValue()}},initValue:function(){for(var t=[].concat(w()(this.data)),e=[].concat(w()(this.column)),i=0;i<t.length;i++){this.$set(this.checkboxControl,"active"+t[i].id,!1);for(var a=0;a<e.length;a++)1==e[a].edit&&this.$set(this.lineValue,"lineValue"+e[a].prop+t[i].id,t[i][e[a].prop])}},rowMouseEnter:function(t){this.$set(this.operate,"operate"+t,!0)},rowMouseLeave:function(t){this.$set(this.operate,"operate"+t,!1)},mouseHover:function(t,e){1==e?this.$set(this.hoverBtn,"hoverBtn"+t,!0):2==e&&this.$set(this.hoverBtn,"hoverBtn"+t,!1)},willDragStart:function(t,e){function i(e){n.moveClientX=e.clientX;for(var i=n.moveClientX-n.startClientX,a=[].concat(w()(n.column)),r=0;r<a.length;r++)if(a[r].prop==t.prop){a[r].width=1*s+1*i;break}n.column=a}function a(){window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",a)}if(void 0!=t.prop&&void 0!=t.width){this.startClientX=e.clientX,this.colItem=m()({},t);var n=this,s=t.width;window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",a),window.addEventListener("mousemove",i),window.addEventListener("mouseup",a)}},expand:function(t,e){for(var i=[].concat(w()(this.data)),a=null,n=0;n<i.length;n++)if(i[n].id==t.id){i[n].icon=e;for(var s=f.a,r=n,o=i[n].level;;){if(r++,a=r,void 0==i[r])break;if(0==e){if(!(i[r].level>o))break;i[r].show=!1}else{if(!(i[r].level>o))break;if(i[r].level>s)continue;i[r].level==s&&(s=f.a),0==i[r].icon&&(s=i[r].level),i[r].show=!0}}}return this.data=i,[a,i]},inputEdit:function(t,e,i){for(var a=[].concat(w()(this.data)),n=([].concat(w()(this.column)),0);n<a.length;n++)if(a[n].id==t){a[n].editing=!0;break}this.data=a,this.$set(this.lineValue,"lineValue"+e+t,i.target.value)},operateBtn:function(t){this.$set(this.operateStatus,"status"+t,!0)},saveBtn:function(t){for(var e=[].concat(w()(this.data)),i=[].concat(w()(this.column)),a=0;a<e.length;a++)if(e[a].id==t){1==e[a].editing&&(e[a].modify=!0);for(var n=0;n<i.length;n++)1==i[n].edit&&(e[a][i[n].prop]=this.lineValue["lineValue"+i[n].prop+t]);break}this.data=e,this.$set(this.operateStatus,"status"+t,!1)},cancel:function(t){for(var e=[].concat(w()(this.data)),i=[].concat(w()(this.column)),a=0;a<e.length;a++)if(e[a].id==t){for(var n=0;n<i.length;n++)1==i[n].edit&&(this.lineValue["lineValue"+i[n].prop+t]=e[a][i[n].prop]);break}this.$set(this.operateStatus,"status"+t,!1)},upload:function(t){function e(){for(var e=[].concat(w()(this.data)),i=([].concat(w()(this.column)),0);i<e.length;i++)if(e[i].id==t){e[i].modify=!1,e[i].editing=!1;break}this.data=e,this.$set(this.uploading,"uploading"+t,!1),this.creatTipDom("上传成功！","success")}function i(){this.$set(this.uploading,"uploading"+t,!1),this.creatTipDom("上传失败，请重试！","error")}for(var a=[].concat(w()(this.data)),n=0;n<a.length;n++)a[n].id==t&&(this.$set(this.uploading,"uploading"+t,!0),this.$emit("uploadmodify",[a[n],e.bind(this),i.bind(this)]));this.rowMouseLeave(t)},addLine:function(t,e){if(1==e){for(var i=[].concat(w()(this.data)),a=null,n=0;n<i.length;n++)i[n].id==t&&(a=i[n]);var s=this.expand(a,!1),r=h()(s,2),o=r[0],l=r[1],d=Date.now()+"__timestamp__",u=m()({},this.data_format,{id:d,level:a.level,parentid:a.parentid,modify:!0,show:!0,children:[]}),p=i.filter(function(t){return t.id==u.parentid})[0];void 0!=p&&(this.$set(this.checkboxControl,"active"+u.id,this.checkboxControl["active"+p.id]),this.checkboxControl["active"+u.id]&&this.deleteIdArr.push(u.id)),l.splice(o,0,u),this.$set(this.operateStatus,"status"+d,!0),this.data=l}else if(2==e){for(var f=[].concat(w()(this.data)),v=null,_=null,b=0;b<f.length;b++)f[b].id==t&&(f[b].children=[!0],v=f[b],v.icon=!0,_=b);var g=Date.now()+"__timestamp__;",x=this.expand(v,!0),C=h()(x,2),k=(C[0],C[1]),y=m()({},this.data_format,{id:g,level:c()(v.level)+1,parentid:v.id,modify:!0,show:!0,children:[]}),$=f.filter(function(t){return t.id==y.parentid})[0];this.$set(this.checkboxControl,"active"+y.id,this.checkboxControl["active"+$.id]),this.checkboxControl["active"+y.id]&&this.deleteIdArr.push(y.id),k.splice(c()(_)+1,0,y),this.$set(this.operateStatus,"status"+g,!0),this.data=k}},checkbox_change:function(t){var e=this;if(!this.deleteBtnDisable){var i=this.checkboxControl["active"+t];this.$set(this.checkboxControl,"active"+t,!i);if(!i){for(var a=[].concat(w()(this.data)),n=0;n<a.length;n++)if(a[n].id==t){for(var s=n,r=a[n].level;;){if(s++,void 0==a[s])break;if(!(a[s].level>r))break;this.$set(this.checkboxControl,"active"+a[s].id,!0)}break}}else!function(){for(var i=[].concat(w()(e.data)),a=0;a<i.length;a++)if(i[a].id==t){var n=function(){var t=function t(e){if(this.$set(this.checkboxControl,"active"+e.parentid,!1),e.parentid!=e.id)for(var a=0;a<i.length;a++)i[a].id==e.parentid&&t.call(this,i[a])},n=a,s=i[a].level;for(e.$set(e.checkboxControl,"active"+i[a].parentid,!1);;){if(n++,void 0==i[n])break;if(!(i[n].level>s))break;e.$set(e.checkboxControl,"active"+i[n].id,!1)}return t.call(e,i[a]),"break"}();if("break"===n)break}}();this.deleteIdArr=[];for(var o in this.checkboxControl)this.checkboxControl.hasOwnProperty(o)&&1==this.checkboxControl[o]&&this.deleteIdArr.push(o.split("active")[1])}},removeLine:function(){function t(){var t=this,e=[].concat(w()(this.data)),i=[].concat(w()(this.deleteIdArr));i.map(function(t){return t+=""});for(var a=0;a<i.length;a++)this.$set(this.uploading,"uploading"+i[a],!1);var n=!0,s=!1,o=void 0;try{for(var d,c=l()(r()(this.checkboxControl));!(n=(d=c.next()).done);n=!0){var u=d.value,p=h()(u,2),f=p[0];p[1];!function(e,a){i.forEach(function(i){e.split("active")[1]==i&&delete t.checkboxControl[e]})}(f)}}catch(t){s=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(s)throw o}}for(var v=e.filter(function(t){for(var e=0;e<i.length;e++)if(i[e]+""==t.id+"")return!1;return!0}),m=0;m<v.length;m++)void 0!=v[m+1]?v[m+1].level<=v[m].level&&(delete v[m].icon,v[m].children=[]):void 0==v[m+1]&&(delete v[m].icon,v[m].children=[]);this.deleteIdArr=[],this.deleteBtnDisable=!1,this.data=v,this.creatTipDom("删除成功！","success")}function e(){for(var t=0;t<this.deleteIdArr.length;t++)this.$set(this.uploading,"uploading"+this.deleteIdArr[t],!1);this.deleteBtnDisable=!1,this.creatTipDom("删除失败，请重试！","error")}var i=[].concat(w()(this.deleteIdArr));if(0!=i.length){this.deleteBtnDisable=!0;for(var a=0;a<i.length;a++)this.$set(this.uploading,"uploading"+i[a],!0);this.$emit("uploaddelete",[i,t.bind(this),e.bind(this)])}},creatTipDom:function(t,e){var i=this,a=null,n=null;"success"==e?(a='<i class="fa fa-check-circle" aria-hidden="true"></i>&nbsp; '+t,n="#40b965"):"error"==e&&(a='<i class="fa fa-times-circle" aria-hidden="true"></i>&nbsp;'+t,n="#da8b29");var s=window.document.createElement("div");s.className="__tip-dom__-wrap",s.innerHTML='<div class="__tip-dom__" style="text-align: center;height: 32px;padding-left: 12px;padding-right: 12px;line-height: 32px;background: '+n+';color: #fff;position: fixed;z-index: 10010;left: 50%;transform: translateX(-50%);top: -42px; transition: all .4s;"> '+a+" </div>",this.$refs.tree.appendChild(s),setTimeout(function(){window.document.querySelector(".__tip-dom__").style.top="14px",setTimeout(function(){window.document.querySelector(".__tip-dom__").style.top="-42px",setTimeout(function(){var t=window.document.querySelector(".__tip-dom__-wrap");i.$refs.tree.removeChild(t)},500)},2e3)},0)}}}}},["NHnr"]);
//# sourceMappingURL=app.73042b849abd813c0996.js.map